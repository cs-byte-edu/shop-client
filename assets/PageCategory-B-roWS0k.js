import{r as c,h as j,d as y,j as e,L as h}from"./index-yzz_AnOp.js";const b=c.memo(()=>{const{categoryId:t}=j(),{products:o,loading:p,error:d,loadProducts:x,categories:n,loadCategories:g,filters:a,updateFilters:l,pagination:i}=y(),[r,u]=c.useState(null);c.useEffect(()=>{g()},[g]),c.useEffect(()=>{if(n.length>0&&t){const s=n.find(f=>f.id===parseInt(t));u(s),l({category:t})}},[n,t,l]),c.useEffect(()=>{if(t){const s={category:t,page:i.page,limit:i.limit,sortBy:a.sortBy,...a.search&&{search:a.search},...a.priceRange[0]>0&&{minPrice:a.priceRange[0]},...a.priceRange[1]<1e3&&{maxPrice:a.priceRange[1]}};x(s)}},[t,x,a,i.page,i.limit]);const m=c.useCallback(s=>{l({...s,page:1})},[l]);return p&&o.length===0?e.jsx("div",{className:"container mx-auto py-8",children:"LOADING..."}):e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("nav",{className:"text-sm breadcrumbs mb-4",children:[e.jsx(h,{to:"/",className:"text-gray-500 hover:text-gray-700",children:"Home"}),e.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),e.jsx(h,{to:"/shop",className:"text-gray-500 hover:text-gray-700",children:"Shop"}),e.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),e.jsx("span",{className:"text-gray-900",children:(r==null?void 0:r.name)||"Category"})]}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:(r==null?void 0:r.name)||"Category"}),(r==null?void 0:r.description)&&e.jsx("p",{className:"text-gray-600 mb-4",children:r.description}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search in category...",value:a.search,onChange:s=>m({search:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})}),e.jsxs("select",{value:a.sortBy,onChange:s=>m({sortBy:s.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"price_asc",children:"Price: Low to High"}),e.jsx("option",{value:"price_desc",children:"Price: High to Low"}),e.jsx("option",{value:"created_at",children:"Newest First"})]})]})]}),d&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:d}),o.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(s=>e.jsx(ProductCard,{data:s},s.id))})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No products found in this category"}),e.jsx("p",{className:"text-gray-600",children:"Check back later for new products"})]})]})});export{b as PageCategory,b as default};
